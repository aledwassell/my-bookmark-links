<table *ngIf="bookmarks" mat-table [dataSource]="bookmarks" class="mat-elevation-z8">
  <ng-container matColumnDef="bookmarks">
    <th mat-header-cell *matHeaderCellDef>Bookmarks</th>
    <td mat-cell *matCellDef="let bookmark">
      <div
        *ngIf="expandedId === bookmark.id; else readonly"
        fxLayoutAlign=" center"
      >
        <app-bookmark-form
          #bookmarkForm
          [value]="{name: bookmark.name, url: bookmark.url}"
          (formValue)="formValue.emit($event)"
        ></app-bookmark-form>
        <button
          type="submit"
          mat-icon-button color="accent"
          [disabled]="bookmarkForm.formGroup.pristine || bookmarkForm.formGroup.invalid"
          (click)="submitFormValue.emit(bookmark.id); expandedId = ''"
        >
          <mat-icon>check</mat-icon>
        </button>
      </div>
      <ng-template #readonly>{{bookmark.name}} <strong>{{bookmark.url}}</strong></ng-template>
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let bookmark">
      <button
        mat-icon-button
        (click)="expandedId = expandedId !== bookmark.id ? bookmark.id : ''"
      >
        <mat-icon>{{expandedId !== bookmark.id ? 'edit' : 'close'}}</mat-icon>
      </button>
      <a mat-icon-button [href]="bookmark.url" target="_blank"><mat-icon>open_in_new</mat-icon></a>
      <button mat-icon-button color="warn" (click)="delete.emit(bookmark.id)"><mat-icon>delete</mat-icon></button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columns"></tr>
  <tr mat-row *matRowDef="let bookmark; columns: columns;"></tr>
</table>
<mat-paginator [length]="bookmarksLength"
              [pageSize]="pageSize"
              [pageSizeOptions]="pageSizeOptions"
              (page)="paginate.emit($event)">
</mat-paginator>
